## AGGREGATIONS
Output of the aggegrated results in csv-files.

The calculation of all solar panels and wind turbines takes  roundabout 24 hours for one year.

To provide an easier access to the data, the python programm aggregator.py does an aggegration of the data and output the aggegrated data to csv-files.

The aggegated tables in the postgreSQL database has the same names as the exported files and you can find the following files for the solar panels:

| file| content |
| --- | --- |
| output/solar/agg_solar_ags.csv | Aggregation of the solar panels on ags-level  |
| output/solar/agg_solar_ags_yr.csv | Aggregation of the solar panels on ags-level and year  |
| output/solar/agg_solar_bl.csv | Aggregation of the solar panels on bundesland-level  |
| output/solar/agg_solar_bl_yr.csv | Aggregation of the solar panels on bundesland-level and year  |
| output/solar/agg_solar_plz.csv | Aggregation of the solar panels on bundesland-level  |
| output/solar/agg_solar_plz_yr.csv | Aggregation of the solar panels on bundesland-level and year  |

**ATTENTION: actually not all csv tables could be uploaded to the gti projekt, due to the fact that the csv files are even to huge after data aggregation.**

**TODO: May try to reduce the csv output-data amount by rounding the float values on output?**

The aggegration of wind turbines are corresponding to solar, but with 'wind' in folder, file and table name instead of 'solar'.

All tables and files has the following name convention:  
>agg\_\[tech\]\_\[level\](\_yr) 

, where as **\[tech\]** is 'solar' or 'wind' and **\[level\]** is the  aggregation for the following geographic entity types:
- ags: Amtlicher Gemeindeschlüssel und somit Stadt oder Gemeinde (german county and town)
- bl: Bundesland (german state)
- plz: Postleitzahl (german zip code) 

and without suffix ..**\_yr** the data is aggregated over all years and in the suffix is aggregated for each year.

The yearly aggregation tables (table suffix \_yr) has columns with the prefix **act\_**... or **run\_**..., whereas act means every units is counted, which is activated in the actual year and run means every units is counted, which is running in the actual year. The part **power_weighted** in a column name signifies that the average is weighted using the power of each unit (column "Nettonennleisung" in MaStr). It get a little weard, but if the **\_avg\_** is part of the column name: this signifies that the average cf of each unit overall years (even those years the unit doesnt exit!) is for calculation. That idea behind it is, that you might mostly want to have the value of the activated/running units of this year if it would be an average weather year and those are the column, which should use than. Those columns are referred as "The Average" column in the following. You should consider to use the column **run_avg_cf_y_power_weighted**, which is the power weighted for each unit weather averaged capacity factor of all units running in this year.

The following columns can be found (see "found in" to see, which column is in which table):

| columns | found in | description |
| --- | --- | --- |
| tech | all tables | pk element to differ the tech if you want to union solar and wind data into one table |
| yr | all *_yr tables |  pk element: the year of aggegration |
| bl | all \*_bl\*-tables | pk element: Bundesland (german state) | 
| plz | all \*_plz\*-tables | pk element:  Postleitzahl (german zip code) | 
| ags | all \*_ags\*-tables | pk element: Amtlicher Gemeindeschlüssel (german county and town) | 
| ags_lat | all \*_ags\*-tables | latitude of the 'Gemeinde' |
| ags_lon | all \*_ags\*-tables | longitude of the 'Gemeinde' |
| avg_cf_gesamt | all | average cf over all years |
| avg_cf_gesamt_power_weighted | all | average cf over all years power weighted (Column "Nettoleistung") |
| nettonennleistung_gesamt | all | Sum of installed power (all years) |
| anzahl_gesamt | all | Amount of all units over all years |
| act_cf_y | all \_yr-tables | Average capacity factor over all in this year activated units  |
| act_cf_y_power_weighted | all \_yr-tables | Power weighted average capacity factor over all in this year activated units | 
| act_avg_cf_y | all \_yr-tables |  Average of "the average"-capacity factor over all in this year activated units |
| act_avg_cf_y_power_weighted | all \_yr-tables |  Power weighted average of "the average"-capacity factor over all in this year activated units |
| act_energy_y | all \_yr-tables |  Sum of all powered generated by in this year activated units in this year |
| act_amount | **NOT IMPLEMENTED YET** | Amount of units activated this year | 
| run_cf_y | all \_yr-tables | Average capacity factor over all units running in this year  |
| run_cf_y_power_weighted | all \_yr-tables | all \_yr-tables | Power weighted average capacity factor over all units running in this year activated units |
| run_avg_cf_y | all \_yr-tables | Average of "the average"-capacity factor over all units running in this year |
| run_avg_cf_y_power_weighted | all \_yr-tables |  Power weighted average of "the average"-capacity factor over all units running in this year |
| run_energy_y | all \_yr-tables | Sum of all powered generated by in this year activated units in this year |
| run_amount | **NOT IMPLEMENTED YET** | Amount of units running this year | 


